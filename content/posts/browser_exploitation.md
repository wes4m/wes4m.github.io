---
title: "ุฅุณุชุบูุงู ุซุบุฑุงุช ุงููุชุตูุญ | Webbrowser exploitation"
date: 2019-11-25 04:51:01 -0700
draft: false
description: "Part 1"
# weight: 1
# aliases: ["/first"]
tags: ["Misc"]
# author: ["Me", "You"] # multiple authors
author: "wes4m"
dir: "rtl"

showToc: false
TocOpen: false
hidemeta: false
comments: false
disableHLJS: false
disableShare: false
disableHLJS: false
hideSummary: true
searchHidden: true
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: false
ShowRssButtonInSectionTermList: false
UseHugoToc: false
cover:
    image: "<image path/url>" # image path/url
    alt: "<alt text>" # alt text
    caption: "<text>" # display caption under cover
    relative: false # when using page bundles set this to true
    hidden: true # only hide on current single page
---


> ุชูููู: ุฅุณุชุบูุงู ุซุบุฑุงุช ุงููุชุตูุญุงุช ููุณ ูู ุฅุฎุชุตุงุตู ุฅููุง ูุฐู ุงูุณูุณูุฉ ุนุจุงุฑุฉ ุนู ุชุฏููู ูุณุชูุฑ ูุทุฑููู ูู ุฎูุถ ูุฐุง ุงููุฌุงู ูุชุนุฒูุฒ ููููู. ุฃู ุงุบูุงุท ุงู ุงุถุงูุงุช ุฃููู ุดุงูุฑ ููู.
> ููุงุญุธุฉ: ุฅุทูุงุน ุณุงุจู ูููู ููููุฉ ุนูู ูุบุงุช ุงูุจุฑูุฌุฉ. ูุงูู Interpreters ุจุดูู ุณุทุญู ูููุฉ ุฌุฏุข ููุฐุง ุงูููุถูุน.



ูุจู ุงูุฎูุถ ูู ุฅุณุชุบูุงู ุซุบุฑุงุช ุงููุชุตูุญุงุช ูุฌุจ ุฃู ูููู ุนูู ุฅุทูุงุน ุจุฃู ุงููุชุตูุญุงุช ูู ูุฐุง ุงูููุช ุฃุตุจุญุช ูู ุฃุถุฎู ูุฃูู ุงูุจุฑูุฌูุงุช ูุฏ ุชูุงุฒู ูู ุชุนููุฏูุง ุฃูุธูุฉ ุงูุชุดุบูู ูุธุฑุข ูุชููููุง ูู ุนูุงุตุฑ ุนุฏูุฏุฉ ูุชุฑุงุจุทุฉ ููุนูุฏุฉ. ููู ูุง ุฅุฒุฏุงุฏ ุงูุชุนููุฏ ูุญุฌู ุงูููุฏ ุจุฑูุฌูุข ูู ูุง ุฅุชุณุน ุงูู Attack surface.
ูุนูู ุณุจูู ุงููุซุงู ุนูุฏูุง ุชุฑุบุจ ุจุงูุนุซูุฑ ุนูู ุซุบุฑุฉ ูุฅุณุชุบูุงููุง ูู ูุธุงู ุชุดุบูู ูุง. ูุฌุจ ุนููู ุชุญุฏูุฏ ูุธุงู ุงูุชุดุบูู ููู ุซู ุชุญุฏูุฏ ุงูุฌุฒุก ุงูุฐู ุชุฑุบุจ ูู ุชุญูููู ูุฏุฑุงุณุชู ููุนุซูุฑ ุนูู ุซุบุฑุงุช. ูุฐูู ูู ุงููุชุตูุญุงุช.


 ูุชููู ุงููุชุตูุญ ูู ูุฐุง ุงูููุช ูู ุนุฏุฉ ุฃุฌุฒุงุก Components ุฃูููุง ( ููุณุช ูุญุตูุฑุฉ ) :
 - UI: ูุงุฌูุฉ ุงููุณุชุฎุฏู
 - Renderer engine: ููุงุจุฏ ูู ุฌุฒุก ูุณุคูู ุนู ุชุญููู ุฃููุงุฏ ุงูุตูุญุงุช ูู ุนุฏุฉ ูุบุงุช ูุซู html, css ููู ูุฑุงูุง ุงููุณุชุฎุฏู.
- Networking: ุงูุฌุฒุก ุงููุณุคูู ุนู ูู ูุงูุชุนูู ุจุงูุดุจูุฉ ูุฅุฑุณุงู ุงูุทูุจุงุช ูุบูุฑูุง.
- Javascript engine: ุงููุญุฑู ุงููุณุคูู ุนู ูู ูุงูุชุนูู ุจุงูู Javascript ูุชูููุฐูุง ูููุณุชุฎุฏู.
- Sandboxing. IPC: ูู ุฃูู ุงูุงุฌุฒุงุก ุงูุชู ุชุนุชุจุฑ ุฌุฒุก ูุณุคูู ุนู ุญูุงูุฉ ุงููุณุชุฎุฏู ุญุชู ุจุนุฏ ูุฌูุฏ ุซุบุฑุงุช.
- ูุบูุฑูุง ุงููุซูุฑ ..


ูู ุฌุฒุก ูุนุชุจุฑ ุถุฎู ููุชูุฑุน ุฌุฏุข ููุงุจู ููุฅุณุชุบูุงู ุจุดูู ุฃู ุจุขุฎุฑ. ูููุฌุฏ ูู ููุฑุณ ูุงูู ุฏุฑุงุณุชู ูู ุฌุฒุก ูุงุญุฏ ููุท ูู ูุฐู ุงูุฃุฌุฒุงุก.
ูู ูุฐู ุงูุณูุณูุฉ ุณูููู ุชุฑููุฒู ุนูู ุงูู Javascript engine ูููููุฉ ุฅุณุชุบูุงู ุซุบุฑุงุชู.


ุชูุฌุฏ ุนุฏุฉ ูุชุตูุญุงุช ูููู ูุชุตูุญ ุงูู Javascript engine ุงูุฎุงุต ุจู ุนุงุฏุชุข. 
ุฃูุซูุฉ ุนูู ุฐูู: 
- Safari: JavascriptCore
- Google Chrome: V8
- Microsoft Edge: ChakraCore
- Firefox: SpiderMonkey


## ููุฏูุฉ ุนู Javascript engines
ูู ุณุจู ูุณุฃูุช ููุณู ููู ูููู ุงููุชุตูุญ ุจุชูููุฐ ุฃููุงุฏ ุงูู javascript ุจุณุฑุนุฉ ุนุงููุฉ ุ ููุฏู ุฃูููุฉ ุงูุณุฑุนุฉ ูู ุงููุชุตูุญุงุช
ุฃู ููุงุฐุง ูุงูููู ูุตููู ุงูููุงูุน ุจุนูู Compile ูุฃููุงุฏ ุงูู javascript ูุชุถููููุง ูุน ุตูุญุงุชูู.

ุชูุฌุฏ ุนุฏุฉ ุฃุณุจุงุจ ุฃูููุง ุงูุญุฌูุ ุงูุณุฑุนุฉุ ูุงูุญุฑูุฉ ูู ุงูุชูุงุตู ูุน ุงูุนูุงุตุฑ ุงูุฅุฎุฑู ูู ุงูุตูุญุฉ ุฅู ุตุญ ุงูุชุนุจูุฑ.
ูุนุงุฏุชุข ุงููุงุฏ ุงูุฌุงูุงุณูุฑุจุช ูุฑุชุจุทุฉ ุจุงูู DOM ูู ุงูุตูุญุฉ ูุชุชุนุงูู ูุน ุงูู Renderer engine ูุฅุถุงูุฉ ูุตูุต ููุฑุงุฆุชูุง ูุงูุญุตูู ุนูู ูุนุทูุงุช ูู ุงููุณุชุฎุฏู ูุฑุจุทูุง ุจู Events ูุถุบุท ุฃุฒุฑุงุฑ ุฃู ุชุบููุฑ ุงูููุงู CSS ูุบูุฑูุง ูู ุชุฑุงุจุทุงุช ุจูู ูู ุฃุฌุฒุงุก ุงูุตูุญุฉ. 

ููููู ุฏุฑุงุณุฉ ุงูู Javascript engine ุจุดูู ุนุงู ูุงููุฑุงุกุฉ ุนูู ูุบูุฑู .. ููู ูุฅุณุชุบูุงูู ูุงุจุฏ ูู ุฅุฎุชูุงุฑ ูุญุฑู ูุญุฏุฏ ูุงูุชุนูู ููู. ููุน ุฅุฎุชูุงุฑู ุนูู `ChakreCore` ููุชูุญ ุงููุตุฏุฑ ููู ููุง ุชุจุฏุฃ ุงูุฑุญูุฉ.

## ChakraCore
[ChakraCore](https://github.com/microsoft) ูู ุฃุณุงุณ ูุญุฑู Chakra ููู ุงูุฌุฒุก ุงููุณุคูู ุนู ุงูู javascript ูู ูุชุตูุญ Microsoft Edge
ูุชููู ุงููุญุฑู ูู ุนุฏุฉ ุฃุฌุฒุงุก ูุงุจูุฉ ููุฅุณุชุบูุงู ููุนูุฏุฉ ูุฐูู ูููู ุณูููู ุชุฑููุฒู ุนูู ุฌุฒุก ูุงุญุฏ ููุท.

![enter image description here](https://github.com/microsoft/ChakraCore/wiki/images/chakracore_componentization.png)

ุงูุฌุงูุงุณูุฑุจุช ูู ูุบุฉ ุจุฑูุฌุฉ ูุบูุฑูุง ูู ุงููุบุงุช ููู ููุช ุจุฏุฑุงุณุฉ ููู ุชุนูู ูุบุฉ ุจุฑูุฌุฉ ุจุดูู ูุจุณุท ุณุชุฑู ุฃูู ุจุญุงุฌุฉ ุงูู Parser ูููู ุจุชุญููู ุงูููุฏ ุงูููุชูุจ ุงูู `Abstract Syntax Tree - AST` ููููู ุงูุชุนูู ูู ูุฐุง ุงูููุถูุน (ูุฏุฑุณ ุนุงุฏุชุข ูู ููุงุณุงุช ุนููู ุงูููุจููุชุฑ)
ููู ุซู ุนูู ุญุณุจ ููุท ุงููุบุฉ ุณุชุญุชุงุฌ ุงูู `Interpret/Compiler` ุฃู ุงูุงุซูุงู ูุนุข. 

ุจุงูุฅุถุงูุฉ ูุฐูู ุชุฌุฏ ูู ุงูุตูุฑุฉ ุนุฏุฉ ุฃุฌุฒุงุก ุฅุถุงููุฉ ูุซู Garbage collector ุงูุฌุฒุก ุงููุณุคูู ุนู ุชูุธูู ุงูุฐุงูุฑุฉ ุจุดูู ุชููุงุฆู. ุนูู ุนูุณ ูุบุงุช ุฅุฎุฑู ูุฏ ูุงุชุญุชูู ุนูู ูุฐุง ุงูุฌุฒุก ูุซู C. ููู ุฌุฒุก ูู ูุฐู ุงูุฃุฌุฒุงุก ุฃูุถุข ูุนูุฏ ููุชูุฑุน ุจุฏุงุฎูู ูุนุฏุฉ ุฃุฌุฒุงุก.

ุจุฅุฎุชุตุงุฑ ุดุฏูุฏุ ููุฑ ูุชุญู ูุตูุญุฉ ุชุญุชูู ุนูู ุฃููุงุฏ ุฌุงูุงุณูุฑุจุช ูุจุฏุฃ ุงููุญุฑู ุจุงูุนูู ููุฑุงุกุฉ ุงูููุฏ ูุจู ุญุชู ุฃู ุชุนุฑุถ ุงูุตูุญุฉ ูู

### (Execution Pipeline) ูุณุงุฑ ุชูููุฐ ุงูู Javascript ูู ChakraCore: 
![](https://github.com/microsoft/ChakraCore/wiki/images/chakracore_pipeline.png)

#### ุงูุฎุทูุฉ ุงูุฅููู:
 ุชุญููู ุงูููุฏ ุงูู `AST` ูููู ุจููููุง ุงูู `Bytecode generator` ููุฐู ูู ุทุฑููุฉ ุนูู ูุบุฉ ุจุฑูุฌุฉ ุงูุฌุงูุง ุจุดูู ุนุงู. ูุชู ุชุญููู ุงูููุฏ ุงูู `Bytecode` ุชุณุชุทูุน ูููู ุงูู `Java virtual machine - JVM` ูุชูููุฐู.
 
#### ุงูุฎุทูุฉ ุงูุซุงููุฉ:
  ูููู ุงูู `Interpreter` ุจุชูููุฐ ุฃู ุงูุฃุตุญ `Interpret` ููู `Bytecode` ูู ุซุฑูุฏ ูููุตู ูุฃุซูุงุก ุชูููุฐู ูููู ุจุฌูุน ูุนูููุงุช ุนู ูู ุณุทุฑ ูููู ุจุชูููุฐู ููู ููุง ูุฃุชู ูุตุทูุญ `Profiling` ุงููุถุงู ูู ุงูุตูุฑุฉ. 
ุนูู ุณุจูู ุงููุซุงู ููุง ุชุนูู ููู ุงูุฌุงูุงุณูุฑุจุช ููููู ุฅุณูุงุฏ ุฑูู ุงูู ูุชุบูุฑ ุฃู ูุต ุจุฏูู ุชุญุฏูุฏ ููุน ุงููุชุบูุฑ ูููุง ูุฃุชู ุฏูุฑ ุงูู `Profiler` ููููู ุจุชุฎุฒูู ุงููุนูููุฉ ุฃู ุงููุชุบูุฑ ูู ููุน `Integer ` ุนูู ุณุจูู ุงููุซุงู. ููุฐูู ุบูุฑูุง ูู ุงููุนูููุงุช.

#### ุงูุฎุทูุฉ ุงูุซุงูุซุฉ: 
ููุง ุชุญุฏุซูุง ุณุงุจูุข ูุฃูู ุนูุตุฑ ูู ุงูุฌุงูุงุณูุฑุจุช ูู ุงูุณุฑุนุฉ. ุงููุณุชุฎุฏู ูุฑูุฏ ุฃู ุชุนูู ุงูุตูุญุฉ ุจุณูุงุณุฉ ูุชุชุญูู ุจุฃุณุฑุน ููุช ูููู
ููุง ูุฃุชู ุฏูุฑ ุงูู `Just In time compiler - JIT`  ููู ุงูุฌุฒุก ุงูุฐู ุณูููู ูุงูู ุชุฑููุฒู ุนููู. 

ูุงูู `JIT` ุ
ูู ุฌุฒุก ูุณุคูู ุนู ุฅุณุชุฎุฏุงู ุงููุนูููุงุช ุงููุฌููุนุฉ ุนู ุทุฑูู ุงูู `Profiling Interpreter` ูุฅุณุชุฎุฏุงููุง ูู ุตุงูุญ ุนูู `Optimization` ููููุฏ. ุจุญูุซ ูุชู ุชูููุฐู ุจุดูู ุฃุณุฑุน. 
 ููุนูู ุฃูู ููููู ุนูู compile ููุฌุงูุงุณูุฑุจุช `Ahead of time - AOT` ูุบูุฑูุง ูู ุงููุบุงุช.
ูููู ุงูุถุนู ูู ุนูู compile ูุณุจู ุจุฃู ุงูููุฏ ุณูุตุจุญ ุจุทูุฆ ูุถุฎู ูุธุฑุข ููุชุญููุงุช ุงูุชู ูุฌุจ ุฃู ุชุถุงู ูุจู ูู ุณุทุฑ ุนูู ุณุจูู ุงููุซุงู ุฅุณูุงุฏ ูุชุบูุฑ ููู ุซู ุฌูุนู ูุน ูุชุบูุฑ ุขุฎุฑ

<script src="https://gist.github.com/wes4m/906897cc4281df061e810e2788f61170.js"></script>

ูุฏ ุชุฑู ุงูููุฏ ุจุณูุท ูููู ูู ุงูุฎูููุฉ ูุนูุฏ ุชุญููู ุงูููุฏ ุงูู `Machine code` ุฅุถุงูุฉ ุฑูู ุงูู ุฑูู ููุณ ูุฅุถุงูุฉ ูุต ุงูู ุฑูู.
ูููุฑุถ ุฃู `b = 2` ุบูุฑูุงู ุงูู ุฑูู ุจุฏู ุนู ูุต. ููู ูููู ููู `Interpreter` ูุนุฑูุฉ ุฐูู ุจุฏูู ูุถุน ุชุนูููุงุช ุฅุถุงููุฉ ููุชุญูู ูู ูู ูุชุบูุฑ ูุจู ุชูููุฐ ุนูููุงุช ุนููู. ููู ูุฐุง ุงูููุทูู ุชุฃุชู ุงูุญุงุฌุฉ ููู `Optimization` ุฎุตูุตุง ูู ูุงูุช ุนูููุฉ ููุฑุฑุฉ ูุญููุงุช ุงูุชูุฑุงุฑ.
ูุงูุชุนูููุงุช ุงูุฅุถุงููุฉ ููุชุญูู ูู ููุน ุงููุชุบูุฑ ุฃู ุญุฌู ูุตูููุฉ ุฃู ุบูุฑู ุงููุซูุฑ ูู ุงูุญุงูุงุช ุชุคุฏู ุงูู ุจุทุฆ ูุฅุถุงุนุฉ ููุช ู ููุงุฑุฏ ุงูุฌูุงุฒ 
ููุฐุง ุงูุฅูุฐุงุฑ ูุนุชุจุฑ ุนุฏู ูู ุฃุนุฏุงุก ุนููุงุก ุงูููุจููุชุฑ ูุงููุซูุฑ ุงููุซูุฑ ูู ุงูุฎูุงุฑุฒููุงุช ูุงูุชููููุฌูุง ูุงูุช ูุชูุฌุฉ ุนู ุจุญูุซ ูู ุงูู `Optimization`

ููู ุญุงูุฉ ุงูู javascript engines ููุง ูููุฏ ุงูู `JIT` 
ูุจุฅุณุชุฎุฏุงู ุงููุนูููุงุช ูู ุงูู `Profiling` ูููู ููู `JIT` ุฅุณุชูุจุงุท ุฅููุฑ ูุซูุฑุฉ ูููุน ุงููุชุบูุฑุ ุญุฌููุ ุญุฌู ุงููุตูููุงุช ูุงูู Objects ูุงููุงุนูู ูุบูุฑูุง ุงููุซูุฑ ูู ุงูุงููุฑ ..
ุจุฅุณุชูุจุงุท ูุฐู ุงููุนูููุงุช ููููู ุฅุชุฎุงุฏ ูุฑุงุฑ ุนูู ุณุจูู ุงููุซุงู ุฃู ุงูููุฏ ูููู ุจุชูููุฐ ุญููุฉ ุชูุฑุงุฑ ููุถูู ูุชุบูุฑูู ูู ููุน `Integer` ูู ูู ูุฑุฉ. ูุจุฏูุฑู ูููู ุจุฅูุชุงุฌ `Machine code` ูุงูููู ุจุงูุชุญูู ูู ููุน ุงููุชุบูุฑ ูู ูู ูุฑุฉ ููููู ุงูุชุญูู ูุฑุฉ ูุงุญุฏุฉ ููู ุซู ุชูููุฐ ุงูููุฏ. 
ูุฐุง ุฃุญุฏ ุงูุฃูุซูุฉ ุนูู ุนูู `Optimization` ูุชุณุฑูุน ุงูููุฏ.
 ูุฏ ููุดู ุงูุชุญูู ุงูุฃูู ูุจุฏูุฑู ูุนูุฏ ุงูู ุงูููุฏ ุงูุณุงุจู ุงูุฃุณุงุณู ูู ุนูููุฉ ุชุณูู `Bail out`.
 ูููู ุฃูุถุง ูุฏ ููุดู ุจุดูู ุบูุฑ ูุชููุน ุฃู ููุตูุฏ  ( ูููุง ุชููู ุงูุซุบุฑุงุชุ ูููููู ุฅุณุชุบูุงู ุนุฏุฉ ุฃููุงุน ุซุบุฑุงุช ูู ุงูู `JIT` )
 
ููุง ูุฑู ูู ุงูุตูุฑุฉ ูููุณู ุงูู `JIT` ูู ChakraCore ุงูู ูุณููู `SimpleJIT` ู `FullJIT` ูู ุฌุฒุก ูุณุคูู ุนู ุนูู `Optimization` ูููู ุงูู `FullJIT` ูู ุงูุฌุฒุก ุงูุฃูู ูู ุงููุญุฑู ูุธุฑุข ูุฃูู ูููู ุจุนูู ุงูุฌุฒุก ุงูุงูุจุฑ ูุงูุงูุซุฑ ุชุนููุฏุข ูู ุงูุชุบููุฑุงุช ูุณูููู ุชุฑููุฒู ูุชูุญูุฑ ุญููู ุจุดูู ูุงูู. ูููู ูุจู ุฐูู ูุงุจุฏ ูู ุงูุชุนูู ุจุดูู ุฃูุจุฑ ูู ChakraCore

> ููุงุญุธุฉ ูุฏ ุชุฎุชูู ุงููุณููุงุช ูุฃุฌุฒุงุก ูู ูุญุฑู  ููุฎุชูู ุงูู implementation ูููู ุจุดูู ุนุงู ุงูุชุดุงุจู ูุจูุฑ ูุงููุธููุฉ ูุงุญุฏุฉ. 
> ุนูู ุณุจูู ุงููุซุงู ุงูู JIT ูู ูุญุฑู ูููู ูุฑูู V8 ูุณูู TurboFan

### ุจุนุถ ุงููุนูููุงุช ุงููููุฉ ูู ChakraCore
ูุงูููููุง ุงูุฎูุถ ูู ุทุฑููุฉ ุนูู ุงูู `JIT` ูููููุฉ ุฅุณุชุบูุงูู ูุจู ุฃู ูุนุฑู ุนุฏุฉ ุฅููุฑ ูููุง ููู ูููู ChakraCore ุจุชุฎุฒูู ุงูุจูุงูุงุช ูู Values, Objects ูุบูุฑูุง ูู ุงูุฐุงูุฑุฉ.
ูุชุญุฏุซุช ุณุงุจูุข ุฃูู ูุงุจุฏ ูู ุงูุชุญูู ูู ุงููุชุบูุฑุงุช ูุจู ุชูููุฐ ุนูููุฉ ุนูููุง ูุธุฑุข ูุฅุฎุชูุงู ุทุฑููุฉ ุชูููุฐ ุงูุนูููุงุช ูุงูุชุนุงูู ูุน  values ูู ุฃููุงุน ูุฎุชููุฉ. 

ููุช ุจุชุญููู ChakraCore ุนูู Linux ูู ููุง: https://github.com/microsoft/ChakraCore
ูุนูู build ูู ููุจุฏุก ูู ุงูุชุนูู ููู ูููู ุจุนุถ ูู ุทุฑู ุนููู.

> ุจุนุถ ุงููุญุฑูุงุช ุงูุฅุฎุฑู ูุซู JavascriptCore ููุนุข ูุง ุฃุณูู ูู ุนูู debugging ูุงูุชุนูู ูููุง ุจุณุจุจ ุชููุฑ ุนุฏุฉ functions ู interactive cli ูู.
>
> ูุฐูู ุณุฃููู ุจุฅุณุชุฎุฏุงู gdb ุนูู linux ูุฃููุง ุงูู environment ุงูููุถูุฉ ูุฏู ูุฏ ุฃููู ุตุนุจุช ุนูู ููุณู ุงูุนูููุฉ

> ุฅุณุชุฎุฏุงู windbg ูุชุญููู ุงููุญุฑู ุนูู windows ูุฑุจูุง ูููู ุฃุณูู ูู ุงูุชุนุงูู ูุนู. ุจูุง ูุนูุงู: ูุงุชุชุงุจุนูู ุฅุณุชุฎุฏู ูููุฏูุฒ ุฃุณูู ๐ค 

#### ุฅุถุงูุฉ functions ููุณูุฑุณ ุชุณุงุนุฏ ุนูู ุนูู debugging 

ููุช ุจุฅุถุงูุฉ ุจุนุถ ุงูfunctions ูุณูุฑุณ ุงููุญุฑู ูุชุณููู ูุญุต ุงูุฐุงูุฑุฉ ูุฅุถุงูุฉ breakpoints 


<script src="https://gist.github.com/wes4m/063ef2e6ddd64ab039135dfe974d8715.js"></script>

<script src="https://gist.github.com/wes4m/3d1542edeaec06a46a44c8f392d03518.js"></script>

<script src="https://gist.github.com/wes4m/c7ba57f4699eb7b5d2d7dd9462a501f0.js"></script>



ุจุนุฏ ุงูุฅุถุงูุฉ ูุนูู build ูููู ุฅุณุชุฎุฏุงู ุงูู functions ูู ููุฏ ุงูุฌุงูุงุณูุฑุจุช ูุชุดุบููู ุนู ุทุฑูู ุงูู `ch`  ุจุฅุณุชุฎุฏุงู gdb ุนูู ุณุจูู ุงููุซุงู

<script src="https://gist.github.com/wes4m/cb1b54005b6ad93e9d85c3475cd4e6bc.js"></script>

ุงูููู ุงููุงุชุฌ `ch` ูู `out/Debug/ch` ูุญุชูู ุนูู ุฅููุงููุงุช ูุซูุฑุฉ ุฌุฏุข ูู ุถูููุง ุทุจุงุนุฉ ุงูููุฏ ุจุนุฏ `Phase` ูุญุฏุฏ ูู ุงููุญุฑู
ุนูู ุณุจูู ุงููุซุงู ููููู ุนุฑุถ ุงูููุฏ ุจุนุฏ ุชุญูููู ุงูู ByteCode ุนู ุทุฑูู ุงูุฃูุฑ
```
ch -dump:Bytecode test.js
```
ูุฐูู ุชุนุทูู `Phase` ูุญุฏุฏ ูุทุจุงุนุฉ ุจุนุถ ุงูุนููุงููู ุนู ุทุฑูู 

<script src="https://gist.github.com/wes4m/c14b01b90aa29c1fe005431cec36e808.js"></script>

ูุบูุฑูุง ุงููุซูุฑ ..

### JSValues 
ููุฑู ููู ูููู ุงููุญุฑู ุจุชุฎุฒูู ุจุนุถ ุงูุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ. ุจุฏุฆุข ุจู `Integers` 

<script src="https://gist.github.com/wes4m/e81b73deb9ce8f08a66cfaffcbb5d021.js"></script>

ููุช ุจุทุจุงุนุฉ ุงูู ByteCode ูุฃูุถุง ุชุชุจุน ุงูู `Interpreter` ูู gdb  ููุงูุช ูุฐู ุงูููุงุญุธุงุช:

![gdb1](/images/wbbx-1.png)
<center>
ุงูุตูุฑุฉ ุจุญุฌู ุฃูุจุฑ ูู <a href="wbbx-1.png">ููุง</a>
</center>


ุงูููุงุญุธุงุช:
- 1: ูุฑู ุฃู ุงูุฑูู 0x414141 ูุชู ุชุฎุฒููู ูุซุงุจุช const ูู R3 ุนู ุทุฑูู `LdC_A_I4` ููุจุฏูุง ุฃูู I4 ุชุฑูุฒ ุงูู `integer` ูู ุฃุฑุจุน ุจุงูุชุงุช
- 2: ูุชู ุฅุณูุงุฏ ุงูุซุงุจุช ูู R3 ุงูู ุงููุชุบูุฑ root.a ููู ุงููุชุบูุฑ ูู ุงูููุฏ ุนู ุทุฑูู `ProfiledStRootFld`
- 3: ุนู ุทุฑูู ุชุชุจุน ุงูู `Interpreter` ูุตููุข ุงูู ุงูุชุนูููุฉ `ProfiledStRootFld` ูุชุชุจุนูุง ุณุชูุงุญุธ ุฃู ุงูุฑูู ุณูุธูุฑ ูู `RSI` ูุซู ูุชู ูููู ุงูู ุนููุงู ุจุงูุฐุงูุฑุฉ ููู ุนููุงู ุงููุชุบูุฑ.
ูููู ุณุชูุงุญุธ ุฃูุถุง ุฃู ุงูุฑูู ุฃุตุจุญ ุจูุฐุง ุงูุดูู:
```
0x 00 01 00 00 00 41 41 41
```
ููู ุชุฑููุง ุงูููุฏ ูููู ุชูููุฐู ุณูุฑู ุงููุชูุฌุฉ ูุงูุชุงูู ุฃูุถุข 
```
Address/val 1th arg: 0x1000000414141
```

ููุง ูุฃูุฏ ุงููุชูุฌุฉ. ููุง ูุนูู ุฃู ุงููุญุฑู ูููู ุจุชุฎุฒูู ุงูุฑูู ูู ุงูุงุฑุจุน ุจุงูุชุงุช ุงูุณูููุฉ  ููููู ุจุฅุณุชุฎุฏุงู `0x00010000` ูู ุงูุงุฑุจุน ุจูุงุชุงุช ุงูุนูููุฉ ููุนูููุฉ ุฃู ูุฐุง ุงููุชุบูุฑ ูู ููุน Integer

ุนูุฏ ุชุฌุฑุจุฉ `NULL` ุณุชูุงุญุธ ุฃู ุงููุชูุฌุฉ `0x0000000000000000` 
ุนูุฏ ุงูุชุฌุฑุจุฉ ุนูู `float` ุงููุชูุฌุฉ ูุฎุชููุฉ ููููุข ูุฏ ูุจุฏู ุฃูู ูุงุชุฌุฏ ุงูุฑูู ุงูุฐู ูุถุนุชู ูููู ูุงูุญุฏุซ ูู ุฃู ุงููุญุฑู ูููู ุจุนูู `XOR` ููู `float` ุงููุฏุฎู ูุน `0xfffc000000000000`. ูุชูุฌุฏ ุจุนุถ ุงููุนูููุงุช ุงูุฅุฎุฑู ูู infinity ู -infinity ูููู ุฑูู ุฎุงุต ููููู ุงูุฅุทูุงุน ุนูู ูุฐุง ุงูููุถูุน ููุนุฑูุฉ ุฃูุซุฑ ุนู ุงูู `floats` ูู ChakraCore: 

https://abchatra.github.io/TaggedFloat

ูุจูุฐู ุงูุขููุฉ ูุงูุชุฌุฑุจุฉ ููููู ููุงุญุธุฉ ุจููุฉ ุฃููุงุน ุงููุชุบูุฑุงุช. 

### JSObjects
ูู ุงูุฌุงูุงุณูุฑุจุช ุฃุบูุจ ูุงุชุชุนุงูู ูุนู ูู ุนุจุงุฑุฉ ุนู Object ุญุชู ุงูู functions 
ูุฃู ุนูุตุฑ ููุณ 

`Primitive type - undefined, null, number, string, boolean` ููู Object 

ูู ุณูุฑุณ ููุฏ ุงููุญุฑู ูุฑู ุฃู ุงูู Object ูู ุงูุฐุงูุฑุฉ ูููู ุจูุฐุง ุงูุดูู`DynamicObject.h`

<script src="https://gist.github.com/wes4m/250cca30e8ea7b318b669ccd40bc6809.js"></script>

ุญุงููุข ูุงููููุง ุณูู ุงูู `auxSlots`, `inline slots` 
ูุงูู Objects ูู ุงูุฌุงูุงุณูุฑุจุช ูุงูุชู ุชุฎุฒูู ุงูู keys ุงูุชุงุจุนุฉ ููุง ูู ุงูุงูุจุฌูุช ููุณู ุจู ูุชู ุชุฎุฒููู ูู `Type` ูููู ุฅุณุชุฎุฏุงูู ุนู ุทุฑูู ุนุฏุฉ Objects ููุชู ุฅุฏุงุฑุชู ุนู ุทุฑูู ุงูู `DynamicTypeHandler` 
ุงูู `type` ููุฌุฏ ูุจุงุดุฑุฉ ุจุนุฏ ุนููุงู ุงูู `vtable` 

ุตูุฑุฉ ุชูุถูุญูุฉ:
![enter image description here](https://abchatra.github.io/images/2015-12-22-Type-ObjectLayout-sharing.png)
ููุนูููุงุช ุฃูุซุฑ ุนู ุงูู `Type` ูู ChakraCore: 
https://abchatra.github.io/Type

ููุง ูููููุง ุชุฌุฑุจุฉ ุนุฏุฉ Objects ููุญุต ุงูุฐุงูุฑุฉ ูููุงุญุธุฉ ูุงุฐูุฑุชู:

<script src="https://gist.github.com/wes4m/3c0bb1a9029677fcb3bb089a62c004ba.js"></script>

![gdb2](/images/wbbx-2.png)
<center>
ุงูุตูุฑุฉ ุจุญุฌู ุฃูุจุฑ ูู <a href="wbbx-2.png">ููุง</a>
</center>

- 1: ุงูุนูุงููู ููู Objects
- 2: ุนูุฏ ุทุจุงุนุฉ ูุญุชูู ุงูุฐุงูุฑุฉ ูู Object a  ููุงุญุธ ุงูุชุงูู:
  - 2.1: ุนููุงู ุงูู vtable ููู ูุญุตูุงู ุณูุฌุฏ ุนูุงููู ูุนุฏุฉ functions ุชุงุจุนุฉ ููู Object
  - 2.2: ุนููุงู ุงูู `Type` 
  - 2.3:  ุงูู JSValue ููุฑูู ุงูุฐู ูุถุนูุงู ูู x `Integer`
  - 2.4: ุงูู JSValue ููุฑูู ุงูุฐู ูุถุนูุงู ูู y `Float` (ููููู ุนูู XOR ูู ููุง ุฐูุฑูุง ุณุงุจูุข ูุซู ุชุญูููู ูู Decimal ููุชุฃูุฏ )
  -  ุฃูุถุง ููุงุญุธ ุฃู ุงูู Values ููุฌูุฏูู ูุจุงุดุฑุฉ ุจุนุฏ ุงูู `Type` ููุง ูุนูู ุฃู ุงูู Object ูุณุชุฎุฏู `inline slots` ุจุฏูุข ูู `auxSlots` ูุงูุณุจุจ ูู ูุถุนูุง ููู values ูุจุงุดุฑุฉ ูู ุณุทุฑ ูุงุญุฏ.
- 2: ุนูุฏ ุทุจุงุนุฉ ูุญุชูู ุงูุฐุงูุฑุฉ ูู Object b ููุงุญุธ ุงูุชุงูู:
  - 2.5: ุนููุงู ุงูู vtable
  - 2.6: ุนููุงู ุงูู `Type` ููู ููุณู ุนููุงู ุงูู `Type` ูู Object a ูุธุฑุข ูุฃููู ุจููุณ ุงูู structure ูุงูู keys ูุฃููุงุน ุงููุชุบูุฑุงุช
  - 2.7: ููุงุญุธ ูุฐู ุงููุฑุฉ ุฃู ุงูู Values ููุณุช inline ุฅููุง ููุฌุฏ ุนููุงู ูุดูุฑ ุงูู `auxSlot` ูุนูุฏ ูุญุตูุง ูุฌุฏ ุงูุชุงูู:
    - 2.8: ุงูู JSValue ููุฑูู ูู x
    - 2.9: ุงูู JSValue ููุฑูู ูู y
- ุนูุฏ ุทุจุงุนุฉ ูุญุชูู ุงูุฐุงูุฑุฉ ูู Object c ููุงุญุธ ุงูุชุงูู:
  - 2.10: ุนููุงู ุงูู vtable
  - 2.11: ุนููุงู ุงูู `Type` ููุฐู ุงููุฑุฉ ุงูุนููุงู ุฅุฎุชูู ูุธุฑุข ูุฅุฎุชูุงู ุชุฑููุจุฉ ูุฐุง ุงูู Object ุนู ุงูุจููุฉ.
  - 2.12 & 2.13: ุงูู JSValues
  - 2.14: ุนููุงู ูุดูุฑ ููู String 
  
  ุจุนุฏ ูุฐู ุงูููุงุญุธุงุช ูุงูุชุฌุงุฑุจ ุฃุตุจุญ ูุฏููุง ููู ุจุดูู ูุจุณุท ุนู ููู ูุนูู ุงููุญุฑู ูู ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ. ุชูุฌุฏ ุนุฏุฉ ูุชุบูุฑุงุช ุฅุฎุฑู ูุฅูุถุง ููููู ุฏุฑุงุณุฉ ุงูู Objects ุจุดูู ููุตู ูุงูู function objects, ูุงูู arrays ูุบูุฑูุง. ูู ูุงูุงู ูุฏูู ูุนูููุงุช ุฃูุซุฑ ูู ูุง ุฅุฒุฏุงุฏุช ุฅููุงููุงุชู ูู ุฅูุชุดุงู ูุฅุณุชุบูุงู ุซุบุฑุงุช ุงููุญุฑู.



## ุงูุฎุชุงู
ูู ุฎุชุงู ุงูููุงูุฉ ุงูุฅููู ูู ูุฐู ุงูุณูุณูุฉ; ุงุชููู ุฃู ุชููู ููุฏูุฉ ูุงููุฉ ููุคุณุณุฉ ูุทุฑูู ุฃู ุดุฎุต ููุชู ูู ูุฐุง ุงููุฌุงู ููุฑุบุจ ุจุงูุชุนูู ููู. ุจุฏูุฑู ุฃุนุชุจุฑ ูุฐู ุงูููุงูุฉ ุชุฏููู ูู ูุชุซุจูุช ูููุนูููุงุช.

### ุงูููุงูุฉ ุงููุงุฏูุฉ:
ูู ุฃุชุทุฑู ูุฃู ุฅุณุชุบูุงูุงุช ูู ูุฐู ุงูููุงูุฉ ูุฃูู ูุงุจุฏ ูู ูุนุฑูุฉ ุงูุฃุณุงุณูุงุช. 
ูู ุงูููุงูุฉ ุงููุงุฏูุฉ ุณุฃุชุนูู ูู ุขููุฉ ุนูู ุงูู `FullJIT` ูููู ูููู ุฅุณุชุบูุงู ุงูู `Optimizations` ููู ูุงููุธุฑ ูู ุนุฏุฏ ูู ุงูุซุบุฑุงุช ุงูุณุงุจูุฉ. 


> ุนุฏุฏ ูู ุงูููุงุถูุน ูุฎุชุตุฑุฉ ุจุดูู ูุจูุฑ ูู ุงูููุงูุฉ ููููู ุงูุฅุทูุงุน ุนูููุง ุจุนุถ ูู ุงููุตุงุฏุฑ ุงููุณุชุฎุฏูุฉ:
> [http://13.58.107.157/archives/7277](http://13.58.107.157/archives/7277)
> [https://abchatra.github.io/TaggedFloat/](https://abchatra.github.io/TaggedFloat/)
> [https://zhuanlan.zhihu.com/p/20792855](https://zhuanlan.zhihu.com/p/20792855)
> [https://www.youtube.com/watch?v=lBL4KGIybWE&list=LLWXClLvEAFlcXQnHnfraTLQ](https://www.youtube.com/watch?v=lBL4KGIybWE&list=LLWXClLvEAFlcXQnHnfraTLQ)
> [https://github.com/microsoft/ChakraCore/wiki/Architecture-Overview](https://github.com/microsoft/ChakraCore/wiki/Architecture-Overview)
> [https://github.com/microsoft/ChakraCore/wiki/ChakraCore-Code-Structure](https://github.com/microsoft/ChakraCore/wiki/ChakraCore-Code-Structure)
